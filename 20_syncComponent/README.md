# component

親で設定したsyncパラメータで可変するコンポーネントサンプル  
コンポーネント内部で変化した値は即時親に返却  

※今回のサンプルはYYYYMMDDHHmmの値を渡すとチェックボックスを表示し、日付入力ができるようになります

## detail

親で設定したsyncパラメータを与えると、特定の条件でコンポーネント内のinput属性が変化する  
※このサンプルでは頭2文字を一つ目のコンポーネントに設定し、右には残りの文字を設定

コンポーネント内のinput属性が変化すると特定のルールに従いパラメータを作成し親に返却する

## attention

### 無限ループの回避
このコンポーネントの基本動作は以下のとおりです。  
1.入力された値 > 2.コンポーネントに設定された値 > 3.コンポーネントから値が生成され親に返却 > 1...  

この際、1. == 3. が成立しないと値変更のループが発生し、無限ループになります。  

#### フェイルセーフ

上記問題は開発中も発生することがあるため、  
フェイルセーフとしてcreatedの際に、入力値とその後返却される値が一致するかチェックを掛けています  

#### 親への返却値に対するcomputedの利用の推奨

実装としては、一旦返却値をcomputedで作成し、それをwatchしてemitで親に返却という方法を取っていますが、

また、わざわざcomponentを利用しているということは、単純なフォームでの構成は少ないと思います。  
多分複数のフォームタグを組み合わせたものになるでしょう  
この際、それぞれのタグのパラメータをwatchして、値を生成することは避けたほうがいいです。  

もともとVue.jsでも推奨されていることですが、このコンポーネントの場合、  
親から値を渡されたときに値の設定をしています。  
すると、値設定後にwatch式が"それぞれ"発生し、返却値が無駄に生成される。  
不明な変更が走り、動作が追いづらくなるなどの問題があります。  

### 親での値変更

上記の仕様上、あまり親側での値変更は想定していません。  
結果をカスタマイズして利用したい場合は、値を受けておりcomponentとは切り離して行ってください  

